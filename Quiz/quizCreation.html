<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
        }
        .correct-option {
            margin-left: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #218838;
        }
        .question-block {
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
            padding-bottom: 10px;
        }
        .remove-button {
            background-color: red;
            color: white;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Create a New Quiz</h2>
        <div id="quizForm">
            <div class="form-group">
                <label for="quizTitle">Quiz Title:</label>
                <input type="text" id="quizTitle" placeholder="Enter quiz title">
            </div>
            <div id="questionsContainer"></div>
            <button onclick="addQuestion()">Add Question</button>
            <button onclick="saveQuiz()">Save Quiz</button>
        </div>
    </div>

    <script>
        let questions = [];

        // Add a new question block
        function addQuestion() {
            const questionIndex = questions.length;
            const questionBlock = document.createElement('div');
            questionBlock.classList.add('question-block');

            questionBlock.innerHTML = `
                <div class="form-group">
                    <label for="question${questionIndex}">Question:</label>
                    <input type="text" id="question${questionIndex}" placeholder="Enter question">
                </div>
                <div class="form-group">
                    <label>Options:</label>
                    <input type="text" id="option${questionIndex}_0" placeholder="Option 1">
                    <input type="radio" name="correct${questionIndex}" value="0" class="correct-option"> Correct<br>
                    <input type="text" id="option${questionIndex}_1" placeholder="Option 2">
                    <input type="radio" name="correct${questionIndex}" value="1" class="correct-option"> Correct<br>
                    <input type="text" id="option${questionIndex}_2" placeholder="Option 3">
                    <input type="radio" name="correct${questionIndex}" value="2" class="correct-option"> Correct<br>
                    <input type="text" id="option${questionIndex}_3" placeholder="Option 4">
                    <input type="radio" name="correct${questionIndex}" value="3" class="correct-option"> Correct<br>
                </div>
                <button class="remove-button" onclick="removeQuestion(this)">Remove Question</button>
            `;
            document.getElementById('questionsContainer').appendChild(questionBlock);

            questions.push({ question: '', options: [], correctOption: null });
        }

        // Remove a question block
        function removeQuestion(element) {
            const questionBlock = element.parentElement;
            const index = Array.from(document.getElementsByClassName('question-block')).indexOf(questionBlock);
            questions.splice(index, 1); // Remove question from array
            questionBlock.remove(); // Remove from DOM
        }

        // Save the quiz
        function saveQuiz() {
            const quizTitle = document.getElementById('quizTitle').value;

            // Loop through each question block and store the question details
            questions.forEach((question, index) => {
                question.question = document.getElementById(`question${index}`).value;
                question.options = [
                    document.getElementById(`option${index}_0`).value,
                    document.getElementById(`option${index}_1`).value,
                    document.getElementById(`option${index}_2`).value,
                    document.getElementById(`option${index}_3`).value
                ];

                // Get the selected correct option
                const correctOption = document.querySelector(`input[name="correct${index}"]:checked`);
                if (correctOption) {
                    question.correctOption = parseInt(correctOption.value);
                } else {
                    question.correctOption = null; // No correct option selected
                }
            });

            // Validate quiz details
            if (quizTitle === '' || questions.some(q => q.correctOption === null)) {
                alert('Please fill out all questions and select the correct answer for each.');
                return;
            }

            // Store the quiz in localStorage
            const quizzes = JSON.parse(localStorage.getItem('quizzes')) || [];
            quizzes.push({ title: quizTitle, questions });
            localStorage.setItem('quizzes', JSON.stringify(quizzes));

            alert('Quiz saved successfully!');
            location.href = 'list.html'; // Redirect to quiz list
        }
    </script>
</body>
</html>
